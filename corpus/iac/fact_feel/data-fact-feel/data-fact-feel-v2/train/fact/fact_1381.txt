Start with the largest most powerful calibur you can get and physically handle. Then consider:
Practice = lots of ammo. 
Lots of ammo = cost increase with larger calibur.
Practice = responsible gun owner.
Training = responsible gun owner.
Large calibur = ability to stop the attack quickly.
Small calibur = less likely to exit your target and hit someone behind it.
Well placed shots from a small calibur are superior to a large calibur that missed.
As a bare minium take a training course that teaches you to handle low light conditions and drawing from a concealed holster. When you need it most are under conditions most favored by criminals, e.g. from behind, up close, in the dark, with suprise, or any combinations of them.
A good instructor will also inform you of all the legal implications of having to defend yourself, the implications of comming to the aid of other people, the legal implications of defense on public and private property, etc.
Personally I have made the decision that I WILL NOT help anyone in mortal danger whom I do not know. The legal implications if you are wrong are very drastic. You can never know the complete conditions of strangers and how they got to be in mortal danger, for all you know the person who just pulled out a gun may be an undercover cop. Thus I will only come to the aid for friends and family whom I know and thier business. My personal decision.
The guys at the gun store are interested with selling you a pistol with the highest profit margin. Not the best tool for you. Only way to find out is with trigger time and carry time on the pistol. So you may have to horse trade a few times until you find the right one.
My personal opinion? A very small .38 revolver with more than one holster. Sometimes you need to carry it on your ankle, sometimes in your pocket, or sometimes on your hip. Plus a ton of ammo for practice. The ammo you spend on practice can soon cost more than the pistol.
Los of inexpensive, reliable, and well built .38's. Not a lot of fun to shoot, but hey, this is a tool with a very specific purpose. Of course of you can deal with more, by all means upgrade to more. Your not going to place a sniper shot between the eyes of a felon. Most likely you will need it at night, very quickly, and at a little longer than "knife fighting distances".
I use a .45 auto. I shoot a full size .45 for fun. Train with the full size .45, but I carry a compact .45. The compact has exactly the same shape in my hand as the large .45, thus when I have to go the the small .45 quickly, it will retain the same operation and configuration in my hand as the large .45. The large .45 has more fun factor, not a lot of fun to carry a big piece of steel on your hip all day.
Plus I reload the .45 empties. The cost of a large calibur with reloading becomes as much as a smaller calibur when the ammo is store bought. The time spent reloading keeps me out of bars on week nights and my girlfriend more comforted.
By the end of the day, after carrying even the compact .45. I wish I had a small .38. The most effecient solution I have seen was a friend who both had a .357 magnum and .22 of the same pistol. He practiced with the .22 pistol all he wanted and very cheaply. Shot the .357 magnum just enough to practice with the recoil. The .22 and .357 had exactly the same size, shape, and trigger pull.
My $.02